{"ast":null,"code":"import { toast } from \"react-hot-toast\";\nexport function login(email, password, navigate) {\n  return async dispatch => {\n    const toastId = toast.loading(\"Loading...\");\n    dispatch(setLoading(true));\n    try {\n      var _response$data, _response$data$user;\n      const response = await apiConnector(\"POST\", LOGIN_API, {\n        email,\n        password\n      });\n      console.log(\"LOGIN API RESPONSE............\", response);\n      if (!response.data.success) {\n        throw new Error(response.data.message);\n      }\n      toast.success(\"Login Successful\");\n      dispatch(setToken(response.data.token));\n      const userImage = (_response$data = response.data) !== null && _response$data !== void 0 && (_response$data$user = _response$data.user) !== null && _response$data$user !== void 0 && _response$data$user.image ? response.data.user.image : `https://api.dicebear.com/5.x/initials/svg?seed=${response.data.user.firstName} ${response.data.user.lastName}`;\n      dispatch(setUser({\n        ...response.data.user,\n        image: userImage\n      }));\n      localStorage.setItem(\"token\", JSON.stringify(response.data.token));\n      navigate(\"/dashboard/my-profile\");\n    } catch (error) {\n      console.log(\"LOGIN API ERROR............\", error);\n      toast.error(\"Login Failed\");\n    }\n    dispatch(setLoading(false));\n    toast.dismiss(toastId);\n  };\n}","map":{"version":3,"names":["toast","login","email","password","navigate","dispatch","toastId","loading","setLoading","_response$data","_response$data$user","response","apiConnector","LOGIN_API","console","log","data","success","Error","message","setToken","token","userImage","user","image","firstName","lastName","setUser","localStorage","setItem","JSON","stringify","error","dismiss"],"sources":["/home/nishant/Desktop/mechtrix-nishant/src/Login/authAPI.js"],"sourcesContent":["import { toast } from \"react-hot-toast\"\n\n\nexport function login(email, password, navigate) {\n    return async (dispatch) => {\n      const toastId = toast.loading(\"Loading...\")\n      dispatch(setLoading(true))\n      try {\n        const response = await apiConnector(\"POST\", LOGIN_API, {\n          email,\n          password,\n        })\n  \n        console.log(\"LOGIN API RESPONSE............\", response)\n  \n        if (!response.data.success) {\n          throw new Error(response.data.message)\n        }\n  \n        toast.success(\"Login Successful\")\n        dispatch(setToken(response.data.token))\n        const userImage = response.data?.user?.image\n          ? response.data.user.image\n          : `https://api.dicebear.com/5.x/initials/svg?seed=${response.data.user.firstName} ${response.data.user.lastName}`\n        dispatch(setUser({ ...response.data.user, image: userImage }))\n        localStorage.setItem(\"token\", JSON.stringify(response.data.token))\n        navigate(\"/dashboard/my-profile\")\n      } catch (error) {\n        console.log(\"LOGIN API ERROR............\", error)\n        toast.error(\"Login Failed\")\n      }\n      dispatch(setLoading(false))\n      toast.dismiss(toastId)\n    }\n  }\n  "],"mappings":"AAAA,SAASA,KAAK,QAAQ,iBAAiB;AAGvC,OAAO,SAASC,KAAKA,CAACC,KAAK,EAAEC,QAAQ,EAAEC,QAAQ,EAAE;EAC7C,OAAO,MAAOC,QAAQ,IAAK;IACzB,MAAMC,OAAO,GAAGN,KAAK,CAACO,OAAO,CAAC,YAAY,CAAC;IAC3CF,QAAQ,CAACG,UAAU,CAAC,IAAI,CAAC,CAAC;IAC1B,IAAI;MAAA,IAAAC,cAAA,EAAAC,mBAAA;MACF,MAAMC,QAAQ,GAAG,MAAMC,YAAY,CAAC,MAAM,EAAEC,SAAS,EAAE;QACrDX,KAAK;QACLC;MACF,CAAC,CAAC;MAEFW,OAAO,CAACC,GAAG,CAAC,gCAAgC,EAAEJ,QAAQ,CAAC;MAEvD,IAAI,CAACA,QAAQ,CAACK,IAAI,CAACC,OAAO,EAAE;QAC1B,MAAM,IAAIC,KAAK,CAACP,QAAQ,CAACK,IAAI,CAACG,OAAO,CAAC;MACxC;MAEAnB,KAAK,CAACiB,OAAO,CAAC,kBAAkB,CAAC;MACjCZ,QAAQ,CAACe,QAAQ,CAACT,QAAQ,CAACK,IAAI,CAACK,KAAK,CAAC,CAAC;MACvC,MAAMC,SAAS,GAAG,CAAAb,cAAA,GAAAE,QAAQ,CAACK,IAAI,cAAAP,cAAA,gBAAAC,mBAAA,GAAbD,cAAA,CAAec,IAAI,cAAAb,mBAAA,eAAnBA,mBAAA,CAAqBc,KAAK,GACxCb,QAAQ,CAACK,IAAI,CAACO,IAAI,CAACC,KAAK,GACvB,kDAAiDb,QAAQ,CAACK,IAAI,CAACO,IAAI,CAACE,SAAU,IAAGd,QAAQ,CAACK,IAAI,CAACO,IAAI,CAACG,QAAS,EAAC;MACnHrB,QAAQ,CAACsB,OAAO,CAAC;QAAE,GAAGhB,QAAQ,CAACK,IAAI,CAACO,IAAI;QAAEC,KAAK,EAAEF;MAAU,CAAC,CAAC,CAAC;MAC9DM,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEC,IAAI,CAACC,SAAS,CAACpB,QAAQ,CAACK,IAAI,CAACK,KAAK,CAAC,CAAC;MAClEjB,QAAQ,CAAC,uBAAuB,CAAC;IACnC,CAAC,CAAC,OAAO4B,KAAK,EAAE;MACdlB,OAAO,CAACC,GAAG,CAAC,6BAA6B,EAAEiB,KAAK,CAAC;MACjDhC,KAAK,CAACgC,KAAK,CAAC,cAAc,CAAC;IAC7B;IACA3B,QAAQ,CAACG,UAAU,CAAC,KAAK,CAAC,CAAC;IAC3BR,KAAK,CAACiC,OAAO,CAAC3B,OAAO,CAAC;EACxB,CAAC;AACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}